<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{ file_name|e }} | LaTeXBuddy</title>
    <style>
        {% include "static/modern-normalize.css" %}
        {% include "static/style.css" %}
        {% include "static/dropdown.css" %}
    </style>
</head>
<body>
<header>
    <h1>
        {% include "static/logo.svg" %}
    </h1>
    <h2><small>Results for</small> {{ file_name|e }}</h2>
</header>
<main>
    <section id="file-contents" style="position:relative;">
        <pre style="line-height: 16px"><code>{{ file_text|safe }}</code></pre>
<!--        {{ problem_str|safe }}-->
    </section>
    <section id="problems-list">
        <h3>Problems</h3>
        <ol>
            {% for problem in problems %}
                <li class="problem is-{{ problem.severity }}" >

                    <div onclick="dropdown()" class="dropdown">
                        <div id="2143" class="dropdown-content">
                            <a onclick="alert(1)">Add to whitelist</a>
                        </div>
                    </div>
                    <script>
                        function dropdown() {
                            document.getElementById("2143").classList.toggle("show");
                        }
                        // Close the dropdown if the user clicks outside of it
                        window.onclick = function(event) {
                          if (!event.target.matches('.dropdown')) {
                            document.getElementById("2143").classList.toggle('show');
                          }
                        }
                    </script>
                    <h4 class="problem-context monospaced">
                        {{ problem.context[0] }}
                        <span class="problem-text">{{ problem.text }}</span>
                        {{ problem.context[1] }}
                    </h4>

                    <p class="problem-description">
                        {{ problem.description if problem.description != None }}
                    </p>

                    {% if problem.suggestions|length > 0 %}


                        <p class="problem-suggestions">
                            <strong>Suggestions:</strong>
                            <br>
                            {% if problem.suggestions|length <= 1 %}
                                {{ "".join(problem.suggestions) }}
                            {% else %}
                                {{ ", ".join(problem['suggestions']) }}
                            {% endif %}
                        </p>
                    {% endif %}

                    <p class="problem-meta">
                        {{ problem.category.capitalize() if problem.category != None }}
                        {{ problem.severity | lower }}
                        {% if problem.position %}
                            at
                            {{ problem.position[0] }}:{{ problem.position[1] }}
                        {% endif %}
                        <i>({{ problem.checker }}#{{ problem.cid }})</i>
                    </p>
                </li>
            {% endfor %}
        </ol>
    </section>
</main>
</body>
</html>
